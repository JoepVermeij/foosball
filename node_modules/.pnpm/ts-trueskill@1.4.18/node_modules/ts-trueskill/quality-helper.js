"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var math = require("mathjs");
function VarianceMatrix(flattenRatings, height, width) {
    var matrix = math.matrix().resize([height, width]);
    var variances = flattenRatings.map(function (r) { return Math.pow(r.sigma, 2); });
    for (var i = 0; i < variances.length; i++) {
        matrix.set([i, i], variances[i]);
    }
    return matrix;
}
exports.VarianceMatrix = VarianceMatrix;
function RotatedAMatrix(newRatingGroups, flattenWeights) {
    var t = 0;
    var r = 0;
    var matrix = math.matrix();
    for (var i = 0; i < newRatingGroups.length - 1; i++) {
        var setter = Array
            .from({ length: newRatingGroups[i].length }, function (m, n) { return n + t; })
            .map(function (z) {
            matrix.set([r, z], flattenWeights[z]);
            t += 1;
            return z;
        });
        var x = setter[setter.length - 1] + 1;
        for (var d = x; d < newRatingGroups[i + 1].length + x; d++) {
            matrix.set([r, d], -flattenWeights[d]);
        }
        r++;
    }
    return matrix;
}
exports.RotatedAMatrix = RotatedAMatrix;
//# sourceMappingURL=quality-helper.js.map